<!--pages/profile/profile.wxml - æˆ‘çš„-->
<view class="page">
  <!-- æœªç™»å½•ï¼šå¤´åƒ + æœªç™»å½• + ç™»å½•æŒ‰é’® -->
  <view class="user-banner" wx:if="{{!userInfo}}">
    <view class="unlogin-row">
      <view class="avatar placeholder"></view>
      <text class="unlogin-text">æœªç™»å½•</text>
      <button class="login-btn-inline" bindtap="onLoginTap">ç™»å½•</button>
    </view>
  </view>

  <!-- å·²ç™»å½•ï¼šå®Œæ•´ç”¨æˆ·å¡ç‰‡ -->
  <view class="user-banner" wx:else>
    <view class="user-row">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill" wx:if="{{userInfo.avatarUrl}}"></image>
      <view class="avatar placeholder" wx:else></view>
      <view class="user-info">
        <text class="nickname">{{userInfo.nickName || 'å¾®ä¿¡ç”¨æˆ·'}}</text>
        <text class="user-id">ID: {{userIdShort || '---'}}</text>
      </view>
    </view>
    <view class="stats-row">
      <view class="stat">
        <text class="stat-num">{{stats.totalMatches || 0}}</text>
        <text class="stat-name">æ€»åœºæ¬¡</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat">
        <text class="stat-num">{{stats.wins || 0}}</text>
        <text class="stat-name">èƒœåœº</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat">
        <text class="stat-num">{{stats.losses || 0}}</text>
        <text class="stat-name">è´Ÿåœº</text>
      </view>
    </view>
    <view class="level-row" bindtap="onLevelTap">
      <text class="level-icon">ğŸ†</text>
      <text class="level-text">{{levelText}}</text>
      <text class="level-link">ç­‰çº§è¯¦æƒ… ></text>
    </view>
  </view>

  <!-- å·²ç™»å½•æ—¶æ˜¾ç¤ºï¼šæˆ‘çš„æœåŠ¡ -->
  <view class="card service-card" wx:if="{{userInfo}}">
    <text class="card-title">æˆ‘çš„æœåŠ¡</text>
    <view class="service-grid">
      <view class="service-item" bindtap="onRecordTap">
        <text class="service-icon">ğŸ“Š</text>
        <text class="service-name">è¯¦ç»†æˆ˜ç»©</text>
      </view>
      <view class="service-item" bindtap="onMatchesTap">
        <text class="service-icon">ğŸ†</text>
        <text class="service-name">æ¯”èµ›è®°å½•</text>
      </view>
      <view class="service-item" bindtap="onFeedbackTap">
        <text class="service-icon">âœ‰</text>
        <text class="service-name">æ„è§åé¦ˆ</text>
      </view>
    </view>
  </view>

  <!-- æ›´å¤šåŠŸèƒ½ -->
  <view class="card more-card" wx:if="{{userInfo}}">
    <text class="card-title">æ›´å¤šåŠŸèƒ½</text>
    <view class="more-list">
      <view class="more-item" bindtap="onPrivacyTap">
        <text class="more-icon">ğŸ”’</text>
        <text class="more-name">éšç§è®¾ç½®</text>
        <text class="more-arrow">></text>
      </view>
      <view class="more-item" bindtap="onAboutTap">
        <text class="more-icon">â„¹</text>
        <text class="more-name">å…³äºæˆ‘ä»¬</text>
        <text class="more-arrow">></text>
      </view>
      <view class="more-item logout" bindtap="onLogoutTap">
        <text class="more-icon">ğŸšª</text>
        <text class="more-name">é€€å‡ºç™»å½•</text>
        <text class="more-arrow">></text>
      </view>
    </view>
  </view>

  <view class="page-bottom"></view>
</view>
